---
import { companyInfo } from '../../database/data';
import MotionNav from '../MotionNav';
import MotionLogo from '../MotionLogo';
import MobileMenu from '../MobileMenu';
---

<header id="main-header" class="bg-transparent backdrop-blur-md fixed top-0 left-0 right-0 z-50 transition-all duration-500 border-b border-transparent">
  <nav class="w-[100px] lg:w-[1200px] mx-auto px-12 sm:px-16">
    <div class="flex items-center justify-between py-2">
      <!-- Logo -->
      <div class="flex-shrink-0">
        <MotionLogo client:load />
      </div>

      <!-- Desktop Navigation -->
      <MotionNav client:load />

      <!-- Mobile Menu -->
      <MobileMenu client:load />
    </div>
  </nav>
</header>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const header = document.getElementById('main-header');
    const heroSection = document.getElementById('inicio');
    
    // Función para cambiar el color del header según la sección
    function updateHeaderColor() {
      const scrollPosition = window.scrollY;
      const heroHeight = heroSection ? heroSection.offsetHeight : 0;
      const crecimientoSection = document.getElementById('crecimiento');
      const crecimientoTop = crecimientoSection ? crecimientoSection.offsetTop : 0;
      const crecimientoHeight = crecimientoSection ? crecimientoSection.offsetHeight : 0;
      
      // Si estamos en la hero section (transparente)
      if (scrollPosition < heroHeight - 100) {
        header.classList.remove('bg-black/80', 'bg-black/90', 'border-orange-500/30');
        header.classList.add('bg-transparent', 'backdrop-blur-md', 'border-transparent');
      }
      // Si estamos en la sección de crecimiento (negro opaco con borde naranja)
      else if (scrollPosition >= crecimientoTop - 100 && scrollPosition < crecimientoTop + crecimientoHeight + 100) {
        header.classList.remove('bg-transparent', 'bg-black/90', 'border-transparent');
        header.classList.add('bg-black/80', 'backdrop-blur-md', 'border-orange-500/30');
      }
      // Todas las demás secciones (mismo color que crecimiento)
      else {
        header.classList.remove('bg-transparent', 'bg-black/90', 'border-transparent');
        header.classList.add('bg-black/80', 'backdrop-blur-md', 'border-orange-500/30');
      }
    }
    
    // Ejecutar al cargar la página
    updateHeaderColor();
    
    // Ejecutar al hacer scroll
    window.addEventListener('scroll', updateHeaderColor);
    
    // Ejecutar al cambiar el tamaño de ventana
    window.addEventListener('resize', updateHeaderColor);
  });
</script>
